{% extends "_layout.njk" %}

{% block title %}
  <title>业务概况</title>
{% endblock %}

{% block breadcumb %}
  <ul class="breadcrumb">
    <li><a href="#">业务概况</a></li>
  </ul>
{% endblock %}

{% block content %}
  <div class="column column-1">
    <div class="map-view">
      <form class="panel-control">
        <select name="year" class="panel-control-item year-select" title="year">
          <option value="2018">2018</option>
          <option value="2017">2017</option>
        </select>
        <select class='panel-control-item region-select' name="region" title="region">
          <option value="all">全国</option>
          <option value="北京">北京</option>
          <option value="天津">天津</option>
          <option value="河北">河北</option>
          <option value="山西">山西</option>
          <option value="内蒙古">内蒙古</option>
          <option value="辽宁">辽宁</option>
          <option value="吉林">吉林</option>
          <option value="黑龙江">黑龙江</option>
          <option value="上海">上海</option>
          <option value="江苏">江苏</option>
          <option value="浙江">浙江</option>
          <option value="安徽">安徽</option>
          <option value="福建">福建</option>
          <option value="江西">江西</option>
          <option value="山东">山东</option>
          <option value="河南">河南</option>
          <option value="湖北">湖北</option>
          <option value="湖南">湖南</option>
          <option value="广东">广东</option>
          <option value="广西">广西</option>
          <option value="海南">海南</option>
          <option value="重庆">重庆</option>
          <option value="四川">四川</option>
          <option value="贵州">贵州</option>
          <option value="云南">云南</option>
          <option value="西藏">西藏</option>
          <option value="陕西">陕西</option>
          <option value="甘肃">甘肃</option>
          <option value="青海">青海</option>
          <option value="宁夏">宁夏</option>
          <option value="新疆">新疆</option>
          <option value="香港">香港</option>
          <option value="澳门">澳门</option>
          <option value="台湾">台湾</option>
        </select>
        <div class="device-search">
          <label class="icon-magnifier search-icon"></label>
          <input type="search" class='panel-control-item search-input' name="search"
                 placeholder="输入设备编号查询">
        </div>
      </form>
      <div class="map-container"></div>
      <div class="device-summary-container">
        <div class="device-summary-item">
          <div class="device-summary-badge">
            <i class="icon-online device-summary-badge-icon"></i>
          </div>
          <div class="device-summary-text">
            <div>
              <span class="highlight">176台</span> <span class="secondary">在线</span>
            </div>
            <div>共425台，在线占比41.4%</div>
          </div>
        </div>
        <div class="device-summary-item">
          <div class="device-summary-badge">
            <i class="icon-star device-summary-badge-icon"></i>
          </div>
          <div class="device-summary-text">
            <div>
              <span class="highlight">170件</span> <span class="secondary">满意度</span>
            </div>
            <div>共172件，满意占比98.8%</div>
          </div>
        </div>
        <div class="device-summary-item">
          <div class="device-summary-badge">
            <i class="icon-repair device-summary-badge-icon"></i>
          </div>
          <div class="device-summary-text">
            <div>
              <span class="highlight">0台</span> <span class="secondary">故障</span>
            </div>
            <div>共425台，故障占比0%</div>
          </div>
        </div>
        <div class="device-summary-item">
          <div class="device-summary-badge">
            <i class="icon-return device-summary-badge-icon"></i>
          </div>
          <div class="device-summary-text">
            <div>
              <span class="highlight">2台</span> <span class="secondary">退机</span>
            </div>
            <div>共425台，退机占比0.47%</div>
          </div>
        </div>
      </div>
    </div>
    <div class="customer-view">
      <div class="widget">
        <header class="widget-header">用户画像</header>
        <a href="#" class="more-link">更多</a>
        <div class="customer-chart-container"></div>
      </div>
    </div>
  </div>
  <div class="column column-2">
    <div class="installation-view">
      <div class="widget">
        <div class="installation-view-header">
          <div class="install-total">总装机量 <span class="highlight">425</span> 台</div>
          <div class="tab-control">
            <div class="tab-control-item tab-control-item-active" data-tab="by-date">时间</div>
            <div class="tab-control-item" data-tab="by-model">型号</div>
          </div>
        </div>
        <div class="installation-chart-container"></div>
        <a href="#" class="more-link">更多</a>
      </div>
    </div>
    <div class="service-view">
      <div class="widget">
        <header class="widget-header">服务信息</header>
        <div class="service-chart-container"></div>
        <a href="#" class="more-link">更多</a>
      </div>
    </div>
    <div class="sales-view">
      <div class="widget">
        <header class="widget-header">渠道分析</header>
        <div class="sales-chart-container"></div>
      </div>
    </div>
  </div>
{% endblock %}

{% block script %}
  <script>
      /* global TahoeBI */
      domready(function () {
          const dashboard = new TahoeBI.DashboardView(document.querySelector('.app'));
          dashboard.updateMapView([
              {
                  name: '大连',
                  value: [121.62, 38.92, 147, 520],
              },
          ]);
          dashboard.updateInstallationView([2, 3, 5, 47, 73, 51, 29, 67, 58, 61, 29]);
          dashboard.updateServiceView([53, 65, 34, 17, 32, 44, 37, 58, 28, 19, 15]);
          dashboard.updateSalesView({
              cities: ['东营', '北京', '上海', '临汾', '鹰潭'],
              values: [5, 8, 12, 30, 370]
          })
      });
  </script>
{% endblock %}